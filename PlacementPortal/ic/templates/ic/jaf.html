{% extends 'ic/root.html' %}
{% block content %}
	<div class="row">
		<div class="jaf card grey lighten-5 col xl8 offset-xl2 l8 offset-l2 m12 s12">
			<div class="card-content black-text">
				<div class="row">
					<span class="card-title center">
						<h5>JAF of <span> {{jaf.company.name}} </span>({{jaf.id}} - {{jaf.profile}})
						<a class="btn-floating btn-small btn waves-effect right waves-light grey darken-4" onclick="editJaf();">
							<i class="material-icons small">edit</i>
						</a>
						</h5>
					</span>
				</div>
				<hr>
				<div class="row">
					<p><h6>Description</h6>{{jaf.description}}</p>
				</div>
				<div class="row">
					<p><h6>Requirements</h6>{{jaf.requirements}}</p>
				</div>
				<div class="row">
					<div class="col m6">
						<p><h6>Accomodation</h6>{{jaf.accomodation}}</p>
					</div>
					<div class="col m6">
						<p><h6>Posting</h6>{{jaf.posting}}</p>
					</div>
				</div>
				<hr>
				<div class="row">
					<p><h6>Salary Details</h6></p>
					<table class="striped bordered centered">
						<thead>
							<tr>
								<th>Department</th>
								<th>Program</th>
								<th>CPI CutOff</th>
								<th>Stipend</th>
							</tr>
						</thead>
						<tbody>
							{% for eligibility in eligibility_list %}
								<tr>
									<td>{{ eligibility.department }}</td>
									<td>{{ eligibility.program }}</td>
									<td>{{ eligibility.cpi_cutoff }}</td>
									<td>{{ eligibility.stipend }} &nbsp {{ eligibility.currency }}</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
				<div class="row">
					<p><h6>Selection Procedure</h6></p>
					<table class="striped bordered centered">
						<thead>
							<tr>
								<th>Test</th>
								<th>Start Time</th>
								<th>Duration</th>
								<th>Venue</th>
								<th>Other Details</th>
							</tr>
						</thead>
						<tbody>
							{% for test in test_list %}
								<tr>
									<td>{{ test.test_type.type }}</td>
									<td>{{ test.start_time }}</td>
									<td>{{ test.duration }}</td>
									<td>{{ test.location }}</td>
									<td>{{ test.description }}</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
				<hr>
				<div class="row">
					<p><h6>Additional Info</h6>{{jaf.other_details}}</p>
				</div>
			</div>
		</div>
	</div>
	
	<div id="modal3" class="modal">
		<form action="{% url 'ic:view_jaf' jaf.id %}" method="post">{% csrf_token %}
			<div class="modal-content">
				<span class="center"><h5>JAF of <span> {{jaf.company.name}} </span>({{jaf.id}} - {{jaf.profile}})</h5></span>
				<div class="row">
					<p><h6 class="center">Update Venue and Timings</h6></p>
					<table class="striped bordered centered">
						<col width="100px" />
						<col width="150px" />
						<col width="100px" />
						<col width="100px" />
						<col width="100px" />
						<thead>
							<tr>
								<th>Test</th>
								<th>Start Time</th>
								<th>Duration</th>
								<th>Venue</th>
								<th>Other Details</th>
							</tr>
						</thead>
						<tbody>
							{% for test in test_list %}
								<tr>
									<td>{{ test.test_type.type }}</td>
									<td><input name="{{ test.test_number }}-start_time" type="text" value="{{ test.start_time }}" /></td>
									<td><input name="{{ test.test_number }}-duration" type="number" min="0" step="10" class="validate" value="{{ test.duration }}"/></td>
									<td><input name="{{ test.test_number }}-location" type="text" value="{{ test.location }}" /></td>
									<td><input name="{{ test.test_number }}-description" type="text" maxlength="200" value="{{ test.description }}" /></td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
				<div class="modal-footer">
					<input type="submit" class="right modal-action modal-close waves-effect grey darken-4 waves-light btn" value="DONE" />
				</div>
			</div>
		</form>
	</div>
{% endblock %}

{% block script %}
	{{ block.super }}
	<script type="text/javascript">
		$(document).ready(function(){
		$('#modal3').modal();
		});
		function editJaf(){
			$('#modal3').modal('open');
		}
	</script>
{% endblock %}